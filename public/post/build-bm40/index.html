<!DOCTYPE html>
<html lang="ja-jp">

<head>
	<meta charset="utf-8">
	<meta name="generator" content="Hugo 0.112.7">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<meta name="google-site-verification" content="1i1Op7whJ5gykPQAa7tjPVqL2kpAQQ2KsY6ZUFIU8p0" />
	
	

<script>(function (w, d, s, l, i) {
    w[l] = w[l] || []; w[l].push({
      'gtm.start':
        new Date().getTime(), event: 'gtm.js'
    }); var f = d.getElementsByTagName(s)[0],
      j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
        'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
  })(window, document, 'script', 'dataLayer', 'GTM-K2G6PBB');</script>



	<link href="//fonts.googleapis.com/css?family=Roboto:400,700" rel="stylesheet" type="text/css">
	<link rel="stylesheet" type="text/css" href="//maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" />
	<link rel="stylesheet" type="text/css" href="/css/normalize.css">
	<link rel="stylesheet" type="text/css" href="/css/skeleton.css">
	<link rel="stylesheet" type="text/css" href="/css/custom.css">
	<link rel="stylesheet" type="text/css" href="/css/affiliate.css">
	<link rel="stylesheet" type="text/css" href="/css/syntax.css">
	<link rel="icon" href="https://blog.uyorum.net/favicon.ico">
	<link rel="alternate" href="/index.xml" type="application/rss+xml" title="@uyorumの雑記帳">
	
	<title>BM40ビルドログ - @uyorumの雑記帳</title>
</head>

<body>
	

<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-K2G6PBB" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>



	<div class="container">

		<header role="banner">
			<div class="header-logo">
				<a href="/"><img src="https://avatars2.githubusercontent.com/u/2661975" width="60" height="60" alt="@uyorumの雑記帳"></a>
			</div>
			
		</header>


<main role="main">
  <article itemscope itemtype="http://schema.org/BlogPosting">
    <h1 class="entry-title" itemprop="headline">BM40ビルドログ</h1>
    <span class="entry-meta">
      <time itemprop="datePublished" datetime=" 2023-12-24">December 24, 2023
      </time>
    </span>
    <span class="pull-right">
      <div class="share-box">
  <ul class="share">
    <a class="facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f" target="_blank">
      <i class="fa fa-facebook fa-lg"></i></a>
    <a class="twitter" href="https://twitter.com/intent/tweet?text=BM40%e3%83%93%e3%83%ab%e3%83%89%e3%83%ad%e3%82%b0 - %40uyorum%e3%81%ae%e9%9b%91%e8%a8%98%e5%b8%b3&amp;url=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f" target="_blank">
      <i class="fa fa-twitter fa-lg"></i></a>
    <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f&amp;title=BM40%e3%83%93%e3%83%ab%e3%83%89%e3%83%ad%e3%82%b0 - %40uyorum%e3%81%ae%e9%9b%91%e8%a8%98%e5%b8%b3" target="_blank">
      <i class="fa fa-linkedin fa-lg"></i></a>
    <a class="email" href="mailto:?subject=BM40%e3%83%93%e3%83%ab%e3%83%89%e3%83%ad%e3%82%b0 - %40uyorum%e3%81%ae%e9%9b%91%e8%a8%98%e5%b8%b3&amp;body=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f">
      <i class="fa fa-envelope fa-lg"></i></a>
  </ul>
</div>

    </span>
    <section itemprop="entry-text">
      <p><img src="/build-bm40/001.jpg" alt="001.jpg"></p>
<p>なにかキーボードを組みたいと思っていたところ、Aliexpressでセールしていたため思い切ってBM40という40%キーボードを購入してみました。
自分としては初めての40%キーボードになります。</p>
<h1 id="購入品">購入品</h1>
<p>物はすべてAliexpressで揃えました。</p>
<table>
<thead>
<tr>
<th style="text-align:left">購入品</th>
<th style="text-align:left">価格</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><a href="https://s.click.aliexpress.com/e/_DC2d3dx">PCB KPrepublic BM40</a></td>
<td style="text-align:left">7,005円</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://s.click.aliexpress.com/e/_DnctRv3">スイッチプレート</a></td>
<td style="text-align:left">1,665円</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://s.click.aliexpress.com/e/_Dehm1l7">ケース</a></td>
<td style="text-align:left">4,554円</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://s.click.aliexpress.com/e/_Dlv0d2h">キースイッチ Gateron G Pro 3.0 Red 70個</a></td>
<td style="text-align:left">2,560円</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://ja.aliexpress.com/item/1005005439129217.html">XDAプロファイル 1uキーキャップ 60個</a></td>
<td style="text-align:left">2,640円</td>
</tr>
<tr>
<td style="text-align:left"><a href="https://s.click.aliexpress.com/e/_DezAgEZ">XDAプロファイル 2uキーキャップ 1個</a></td>
<td style="text-align:left">777円</td>
</tr>
</tbody>
</table>
<p>合計で19,301円でした。
ただし今回のキーボードは47キーしかありませんのでキースイッチとキーキャップはいくつか余ります。</p>
<h1 id="組み立て">組み立て</h1>
<p>途中の写真は撮り忘れました。
基板はすべて実装済みなのではんだ付けは不要。
キースイッチもソケットが実装済みなのでソケットに取り付けていくだけで完成します。</p>
<h1 id="ファームウェアビルド">ファームウェアビルド</h1>
<p>ファームウェアは初めからインストール済みのためすぐに使い始めることができますが、キーマップのカスタマイズは自作キーボードの醍醐味のひとつですので早速カスタマイズしていきます。
<a href="https://kprepublic.com/">公式サイト</a>上部のDownloadからマニュアルやビルド済みのファームウェアがダウンロードできますが、基本的には<a href="https://kbfirmware.com/">Keyboard Firmware Builder</a>というサイトにキーマップを定義したjsonをアップロードすることでファームウェアをビルドする手順のようです。</p>
<p>自分の場合はキーマップをバージョン管理したかったのと手元でQMKファームウェアをビルドする環境がセットアップ済みのため自分でソースコードからビルドすることにします。
（実はキーボード選定の時点でこれができることを確認した上でBM40を選択しています）</p>
<p>BM40用のソースコードは<a href="https://github.com/qmk/qmk_firmware/tree/master/keyboards/kprepublic/bm40hsrgb/rev2">本家リポジトリ</a>に取り込まれているので手元でビルドします。
（BM40には基板のバージョンが2通りあるようです。自分の場合は基板の裏面にrev2と書かれていました）</p>
<p><a href="https://docs.qmk.fm/#/">公式サイト</a>通りの手順のためビルド手順は省略します。</p>
<h1 id="キーマップの作成">キーマップの作成</h1>
<p>で、出来上がったキーマップが<a href="https://github.com/uyorum/qmk_firmware/blob/mine/bm40/keyboards/kprepublic/bm40hsrgb/rev2/keymaps/uyorum/keymap.c">こちら</a></p>
<pre tabindex="0"><code>/* Qwerty
 * ,-----------------------------------------------------------------------------------.
 * |  Tab |   Q  |   W  |   E  |   R  |   T  |   Y  |   U  |   I  |   O  |   P  |   @  |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * | Ctrl |   A  |   S  |   D  |   F  |   G  |   H  |   J  |   K  |   L  |   ;  |   :  |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * | Shift|   Z  |   X  |   C  |   V  |   B  |   N  |   M  |   ,  |   .  |   /  |   _  |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |  Esc |  GUI |  Alt | Bksp/| F19/ |    Space    | F20/ |Enter/|   -  |   ^  |   \  |
 * |      |      |      | Ctrl | Lower|             | Raise| Shift|      |      |      |
 * `-----------------------------------------------------------------------------------&#39;
 */

/* Lower
 * ,-----------------------------------------------------------------------------------.
 * | 半/全|   !  |   &#34;  |   #  |   $  |   %  |   &amp;  |   &#39;  |   =  |   ~  |   |  |  Del |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |      |      |   [  |   {  |   (  |   )  |   }  |   ]  |      |      |      |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |      |      |      |      |      |      |      |A+PScr| Pg Up|  Up  | Pg Dn|
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |      |      |      | XXXX |             |      | PrtSc| Left | Down | Right|
 * `-----------------------------------------------------------------------------------&#39;
 */

/* Raise
 * ,-----------------------------------------------------------------------------------.
 * | 半/全|   1  |   2  |   3  |   4  |   5  |   6  |   7  |   8  |   9  |   0  |  Del |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |      |      |   [  |   {  |   (  |   )  |   }  |   ]  |      |      |      |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |  F1  |  F2  |  F3  |  F4  |  F5  |  F6  |  F7  |  F8  |  F9  |  F10 |      |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |  F11 |  F12 |      |      |             | XXXX | Next | Vol- | Vol+ | Play |
 * `-----------------------------------------------------------------------------------&#39;
 */

/* Adjust (Lower + Raise)
 *                      v------------------------RGB CONTROL--------------------v
 * ,-----------------------------------------------------------------------------------.
 * |      | Reset|Debug | RGB  |RGBMOD| HUE+ | HUE- | SAT+ | SAT- |BRGTH+|BRGTH-|      |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |      |      |      |      |      |      |      |      |      |      |      |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |      |      |      |      |      |      |      |      |      |      |      |
 * |------+------+------+------+------+------+------+------+------+------+------+------|
 * |      |      |      |      |      |             |      |      |      |      |      |
 * `-----------------------------------------------------------------------------------&#39;
 */
</code></pre><p>日本語配列をベースにレイヤーを駆使して記号や数字を配置。<br>
日本語配列なので右側が窮屈ですが単キー押しで入力できる記号が多くなのでこれはこれで良いのかなと思っています。<br>
親指のあたりはQMKのホールド機能を使って複数の機能を持たせています。40%キーボードなのでこれは必然かなと。<br>
自分はIMEの設定でF19にIMEオフ、F20に日本語入力を設定しているのでMacぽい切り替えができるようになっています。</p>
<p>試しにこのブログ記事はこのキーボードでほとんど入力してみましたが、案外すんなり打てました。ただし右下の記号やEnterがどうしても誤爆がちですが、これくらいは打っていくうちに慣れると思います。</p>
<p>ファームウェアが出来上がったらQMK Toolboxを使って焼いていきます。
キーボードの左上のキーを押しながらUSBを接続することでDFUモードに入ります。</p>
<h1 id="いくつかの不満">いくつかの不満</h1>
<ul>
<li>PCBが滑る<br>
PCBとケースをネジ止めしていますが、PCBが完全に固定されず若干グラグラする状態です。現在は滑り止めを挟んで対処しています。</li>
<li>タイピング時に金属音ぽい音が響く<br>
タイピング時にケースに音が響いて若干金属ぽい音がするのが気になります。</li>
<li>重い
ケースが金属製のため見た目以上に重いです。測ったところ460gもありました。
ノートPCと一緒に使おうと思っているので重すぎると持ち運びに支障が出ます。</li>
</ul>
<p>だいたいケースに起因する問題なので3Dプリンタでケースを自作することで解決できそうです。
時間を見つけて今度はケースを自作してみようと思います。</p>
<p>以上</p>
<h1 id="参考">参考</h1>
<p><a href="https://note.com/fumix/n/n5e7da2224acf">BM40V2（自作キーボード）の設定｜fumix</a>
ファームウェアの焼き方など参考にさせていただきました</p>
    </section>
    <aside>
      <div class="share-box">
  <ul class="share">
    <a class="facebook" href="https://www.facebook.com/sharer.php?u=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f" target="_blank">
      <i class="fa fa-facebook fa-lg"></i></a>
    <a class="twitter" href="https://twitter.com/intent/tweet?text=BM40%e3%83%93%e3%83%ab%e3%83%89%e3%83%ad%e3%82%b0 - %40uyorum%e3%81%ae%e9%9b%91%e8%a8%98%e5%b8%b3&amp;url=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f" target="_blank">
      <i class="fa fa-twitter fa-lg"></i></a>
    <a class="linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f&amp;title=BM40%e3%83%93%e3%83%ab%e3%83%89%e3%83%ad%e3%82%b0 - %40uyorum%e3%81%ae%e9%9b%91%e8%a8%98%e5%b8%b3" target="_blank">
      <i class="fa fa-linkedin fa-lg"></i></a>
    <a class="email" href="mailto:?subject=BM40%e3%83%93%e3%83%ab%e3%83%89%e3%83%ad%e3%82%b0 - %40uyorum%e3%81%ae%e9%9b%91%e8%a8%98%e5%b8%b3&amp;body=https%3a%2f%2fblog.uyorum.net%2fpost%2fbuild-bm40%2f">
      <i class="fa fa-envelope fa-lg"></i></a>
  </ul>
</div>

    </aside>
    

<h1>関連記事</h1>
<ul>
  
  <li><a href="/post/lenovo-wireless-multi-device-mouse/">Lenovo Go USB Type-C ワイヤレス マルチデバイスマウスを買った</a></li>
  
</ul>


    
    <div class="disqus-comments">
      <div id="disqus_thread"></div>
<script type="application/javascript">
    window.disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "uyorum" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
    
  </article>
</main>

<footer role="contentinfo">
	<div class="hr"></div>
	<div class="footer-link">
		<a href="mailto:uyorum.pub@gmail.com" target="_blank"><i class="fa fa-envelope fa-2x"></i></a>
		<a href="https://twitter.com/uyorum" target="_blank"><i class="fa fa-twitter fa-2x"></i></a>
		
		<a href="https://github.com/uyorum" target="_blank"><i class="fa fa-github fa-2x"></i></a>
		
		
	</div>
	<div class="copyright">Copyright &copy; uyorum All Right Reserved.</div>
</footer>
</div>





<script src="/js/code-title.js"></script>

</body>

</html>

